<script>
  // Rent Reviews dropdown (desktop)
  const dd = document.querySelector('[data-dd]');
  const ddBtn = document.querySelector('[data-dd-btn]');
  const ddMenu = document.querySelector('[data-dd-menu]');

  function closeDD(){
    if(!ddMenu) return;
    ddMenu.classList.add('hidden');
    ddBtn?.setAttribute('aria-expanded','false');
  }
  function openDD(){
    if(!ddMenu) return;
    ddMenu.classList.remove('hidden');
    ddBtn?.setAttribute('aria-expanded','true');
    feather.replace();
  }

  ddBtn?.addEventListener('click', (e) => {
    e.stopPropagation();
    ddMenu.classList.contains('hidden') ? openDD() : closeDD();
  });

  document.addEventListener('click', (e) => {
    if(!dd) return;
    if(!dd.contains(e.target)) closeDD();
  });

  document.addEventListener('keydown', (e) => {
    if(e.key === 'Escape') closeDD();
  });
</script>
